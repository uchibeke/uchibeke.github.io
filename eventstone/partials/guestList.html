<div ng-include="'partials/nav.html'"></div>
<section class="guestpage container-fluid pg " id="guestListPage">
	<div class=" pull-left" >
		<a class="btn btn-default btn-xs" type="button" ng-href="#!/dashboard"> <span class="fa fa-tachometer"></span> Dashboard</a>
	</div>
	<div class="">
		<p style="" class=" pull-right">
			<button class="btn btn-primary btn-xs pull-right" ng-click="eventSummary = !eventSummary;">
				<span ng-show="!eventSummary">View summary</span><span ng-show="eventSummary">Hide Summary</span>
			</button>
		</p>
	</div>
	<div class="clearfix"></div>
	<div class="guestlist row  text-center center-block" >
		<div class="row">
			<div class="  panel panel-default" data-toggle="buttons" style="padding-bottom: 2%;"
			ng-show="eventSummary">
				<div class="panel-body">
					<form role="form">
						<div class="form-group col-md-6 text-center">
							<label >Word/phrase to get summary of: </label>
							<input class="form-control"  placeholder="Type 'Nurse' to get how many times Nurse is found in a column" type="text"
							ng-model="summaryItem">
						</div>
						<div class="form-group col-md-6 text-center">
							<label >Column number</label>
							<input  class="form-control"  placeholder="Column to find word" type="text"
							ng-model="columnNumber" ng-required="true">
						</div>
					</form>
					<div class="row text-left" style="padding-left: 5%;padding-right: 5%;">
						<span class="text-left text-muted"> Eg. If I wanted to get how many times {{$storage.guestsList[0][0]}} shows up in
							column 1, I would enter  '{{$storage.guestsList[0][0]}}' in the first field and '1' in the second field.
							You may use this feature to get a summary of the role of attendees or the session they signed up for. This could also be used to get the
							total number of attendees from a school/company or to see total attendees with the same title. </span>
					</div>
					<p class=" text-muted" ng-show="summaryItem.length > 0 && columnNumber.length > 0">
						{{summaryItem}} was found <b class="text-success" style="font-size: xx-large;">{{sessionTotal(summaryItem, columnNumber)}}</b> times in
						column {{columnNumber}}
					</p>
					<br />
					<div class="row text-center " >
						<span class="col-lg-4 col-md-4 col-sm-4">{{$storage.guestsList.length}} total</span>
						<span class="col-lg-4 col-md-4 col-sm-4 text-success">{{checkIns()}} checked-in</span>
						<span class="col-lg-4 col-md-4 col-sm-4 text-warning">{{noCheckIns()}} not checked-in</span>
					</div>
				</div>
			</div>
		</div>
		<a class="btn btn-primary btn-lg pull-left " ng-click="exportData('toPrint', 'xls')"><span class="glyphicon glyphicon-save"></span></a>
		<div class="clearfix"></div>
		<div id="toPrint">
			<h1>{{$storage.eventName }}</h1>
			<div class="row text-center " >
				<span class="col-lg-4 col-md-4 col-sm-4">{{$storage.guestsList.length}} total</span>
				<span class="col-lg-4 col-md-4 col-sm-4 text-success">{{checkIns()}} checked-in</span>
				<span class="col-lg-4 col-md-4 col-sm-4 text-warning">{{noCheckIns()}} not checked-in</span>
			</div>
			<br />
			<table class="table table-responsive table-bordered text-left table-condensed" >
				<tbody>
					<tr ng-repeat="item in $storage.guestsList" class="toPrintTr">
						<td ng-repeat="a in limitDisplay(item, 15) track by $index" ng-hide="a == undefined || item[0] == '-'">{{ a ? a : "Not Checked In" }}</td>
						<td ng-show="item[0] == '-'">{{item.id}}</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</section>

